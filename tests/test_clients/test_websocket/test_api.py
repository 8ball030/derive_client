"""Tests for autogenerated API."""

import pytest
from derive_client.data_types.generated_models import (
    PrivateGetOrdersParamsSchema,
    PrivateGetOrdersResultSchema,
    PrivateGetSubaccountsParamsSchema,
    PrivateGetSubaccountsResultSchema,
    PublicGetTickerParamsSchema,
    PublicGetTickerResultSchema,
)


@pytest.mark.asyncio
async def test_public_get_ticker(client_admin_wallet):
    instrument_name = "ETH-PERP"
    params = PublicGetTickerParamsSchema(instrument_name=instrument_name)
    result = await client_admin_wallet._public_api.rpc.get_ticker(params=params)
    assert isinstance(result, PublicGetTickerResultSchema)


@pytest.mark.asyncio
async def test_get_private_get_subaccounts(client_admin_wallet):
    wallet = client_admin_wallet._auth.wallet
    params = PrivateGetSubaccountsParamsSchema(wallet=wallet)
    result = await client_admin_wallet._private_api.rpc.get_subaccounts(params=params)
    assert isinstance(result, PrivateGetSubaccountsResultSchema)


@pytest.mark.asyncio
async def test_get_private_get_orders(client_admin_wallet):
    subaccount_id = client_admin_wallet.active_subaccount.id
    params = PrivateGetOrdersParamsSchema(subaccount_id=subaccount_id)
    result = await client_admin_wallet._private_api.rpc.get_orders(params=params)
    assert isinstance(result, PrivateGetOrdersResultSchema)
